<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Future Smart Logistics</title>
  <!-- Favicons & Manifest -->
  <link rel="icon" href="favicon.ico" sizes="32x32" type="image/x-icon">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#003366">
  <style>
    html { zoom:100%; }
    html, body { margin:0; padding:0; height:100%; overflow:hidden; background:#f5f9fc; color:#333; font-family:'Segoe UI',sans-serif; }
    header { height:60px; line-height:60px; background:#003366; color:#fff; text-align:center; }
    header h1 { margin:0; font-size:1.2rem; }
    .main { display:flex; height:calc(100% - 60px); }
    .sheet { flex:3; padding:0.5rem; }
    .sheet iframe { width:100%; height:100%; border:none; border-radius:6px; }
    .panel { flex:1; max-width:350px; background:#fff; border-left:1px solid #ddd; display:flex; flex-direction:column; padding:1rem; box-shadow:-2px 0 6px rgba(0,0,0,0.05); }
    .total-counter { text-align:center; font-size:1.2rem; font-weight:600; margin-bottom:1rem; color:#003366; }
    .tracker-title { text-align:center; color:#003366; font-size:1.2rem; margin-bottom:1rem; }
    .call-section { margin-bottom:1rem; }
    .call-section label { display:block; margin-bottom:0.25rem; font-weight:600; }
    .call-section input { width:100%; padding:0.5rem; font-size:1rem; border:1px solid #ccc; border-radius:4px; margin-bottom:0.5rem; }
    .call-section button { width:100%; padding:0.75rem; font-size:1rem; background:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer; margin-bottom:0.5rem; }
    .call-section button:hover { background:#0056b3; }
    .counter { text-align:center; font-size:1.25rem; font-weight:bold; color:#d9534f; margin-top:0.5rem; }
    .notes-section { flex:1; display:flex; flex-direction:column; }
    .notes-section textarea { flex:1; padding:0.5rem; font-size:0.9rem; border:1px solid #ccc; border-radius:4px; resize:none; margin-bottom:0.5rem; }
    .notes-section .buttons { display:flex; gap:0.5rem; }
    .notes-section .buttons button { flex:1; padding:0.6rem; font-size:0.9rem; background:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer; }
    .notes-section .buttons button:hover { background:#0056b3; }
    .signature { text-align:center; font-size:0.75rem; color:#888; margin-top:1rem; }
  </style>
</head>
<body>
  <header><h1>üìû Sales Dialer - Future Smart Logistics</h1></header>
  <div class="main">
    <div class="sheet">
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQHAylQdwmgOaWzvATwSkV9Ax79cjjGWMkhJNf31JCggH8Zp79-I6TEgafLW514osMIeKKzo9CWl_ES/pubhtml?widget=true&amp;headers=false"></iframe>
    </div>
    <div class="panel">
      <div class="total-counter">Calls: <span id="totalCount">0</span></div>
      <div class="tracker-title">Call Tracker</div>
      <div class="call-section">
        <label for="phoneInput">Phone Number:</label>
        <input id="phoneInput" type="tel" placeholder="e.g. 12679803710" />
        <button id="callNowBtn">üì≤ Call Now</button>
        <div class="counter">Calls Today: <span id="dailyCount">0</span></div>
      </div>
      <div class="notes-section">
        <h2>üìù Call Notes</h2>
        <textarea id="callNotes" placeholder="Write call details here..."></textarea>
        <div class="buttons">
          <button onclick="saveNotes()">üíæ Save Notes</button>
          <button onclick="openFindDialog()">üîç How to Find Number</button>
        </div>
      </div>
      <div class="signature">Developed by Skp Dispatch Solutions</div>
    </div>
  </div>
  <script>
    // Simple Calls counter
    const TOTAL_KEY = 'fslogistics_total_calls';
    const totalEl = document.getElementById('totalCount');

    function loadTotal() {
      return parseInt(localStorage.getItem(TOTAL_KEY)) || 0;
    }
    function saveTotal(val) {
      localStorage.setItem(TOTAL_KEY, val);
    }
    function updateTotalDisplay() {
      totalEl.textContent = loadTotal();
    }

    // Load initial value
    updateTotalDisplay();

    // Call Now logic
    document.getElementById('callNowBtn').addEventListener('click', () => {
      const num = document.getElementById('phoneInput').value.trim();
      if (!num) return alert('Enter a phone number');
      // Open new window/tab
      window.open(`https://voice.google.com/u/0/calls?a=nc,%2B${num}`, '_blank');

      // Increment total calls
      let total = loadTotal() + 1;
      saveTotal(total);
      updateTotalDisplay();

      // Existing daily counter (unchanged)
      const DAILY_KEY = 'fslogistics_daily_calls';
      let dailyData = JSON.parse(localStorage.getItem(DAILY_KEY) || '{}');
      const today = new Date().toISOString().split('T')[0];
      dailyData[today] = (dailyData[today] || 0) + 1;
      localStorage.setItem(DAILY_KEY, JSON.stringify(dailyData));
      document.getElementById('dailyCount').textContent = dailyData[today];
    });

    // Notes auto-save
    const notes = document.getElementById('callNotes');
    const NOTES_KEY = 'fslogistics_notes';
    notes.value = localStorage.getItem(NOTES_KEY) || '';
    notes.addEventListener('input', () => localStorage.setItem(NOTES_KEY, notes.value));

    function saveNotes() {
      const blob = new Blob([notes.value], {¬†type: 'text/plain' });
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
      a.download = 'notes.txt'; a.click();
    }
    function openFindDialog() {
      alert('Press Ctrl+F (Cmd+F) to search within the sheet.');
    }
  </script>
</body>
</html>
